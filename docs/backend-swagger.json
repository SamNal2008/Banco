{"openapi":"3.1.0","info":{"title":"Banking MCP API","description":"API documentation for Banking MCP application","contact":{"name":"Banco","url":"https://banco.fr","email":"contact@banco.fr"},"license":{"name":"Apache 2.0","url":"https://www.apache.org/licenses/LICENSE-2.0"},"version":"v1.0.0"},"servers":[{"url":"http://localhost:8080","description":"Local development server"}],"tags":[{"name":"Actuator","description":"Monitor and interact","externalDocs":{"description":"Spring Boot Actuator Web API Documentation","url":"https://docs.spring.io/spring-boot/docs/current/actuator-api/html/"}}],"paths":{"/api/v1/onboarding/{userId}/select-bank":{"post":{"tags":["onboarding-controller"],"operationId":"selectBank","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SelectBankRequestDTO"}}},"required":true},"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK"}}}},"/api/v1/onboarding/{userId}/complete":{"post":{"tags":["onboarding-controller"],"operationId":"completeOnboarding","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompleteOnboardingRequestDTO"}}},"required":true},"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ToCompleteOnboardingResponse"}}}}}}},"/api/v1/onboarding/initiate":{"post":{"tags":["onboarding-controller"],"operationId":"initiateOnboarding","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InitiateOnboardingRequestDTO"}}},"required":true},"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LinkingBankAccountResponseDTO"}}}}}}},"/api/v1/auth/sign-up":{"post":{"tags":["authentication-controller"],"operationId":"registerUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterUserRequestDTO"}}},"required":true},"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"201":{"description":"Created","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RegisterUserResponseDTO"}}}}}}},"/api/v1/auth/sign-in":{"post":{"tags":["authentication-controller"],"operationId":"signIn","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInRequestDTO"}}},"required":true},"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LoginResponseDTO"}}}}}}},"/api/v1/assistant/chat":{"post":{"tags":["assistant-controller"],"operationId":"chat","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}},"required":true},"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ChatResponse"}}}}}}},"/api/v1/transactions/{userUuid}":{"get":{"tags":["transactions-controller"],"operationId":"getTransactions","parameters":[{"name":"userUuid","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/GetTransactionsResponse"}}}}}}},"/api/v1/onboarding/available-banks":{"get":{"tags":["onboarding-controller"],"operationId":"getAvailableBanks","responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AvailableBanksResponseDTO"}}}}}}},"/api/v1/expenses/{userId}":{"get":{"tags":["expenses-controller"],"operationId":"getExpenses","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/GetExpensesWidgetResponse"}}}}}}},"/api/v1/auth/callback/{provider}":{"get":{"tags":["provider-auth-controller"],"operationId":"callback","parameters":[{"name":"provider","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/actuator":{"get":{"tags":["Actuator"],"summary":"Actuator root web endpoint","operationId":"links","responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"application/vnd.spring-boot.actuator.v3+json":{"schema":{"type":"object","additionalProperties":{"type":"object","additionalProperties":{"$ref":"#/components/schemas/Link"}}}},"application/vnd.spring-boot.actuator.v2+json":{"schema":{"type":"object","additionalProperties":{"type":"object","additionalProperties":{"$ref":"#/components/schemas/Link"}}}},"application/json":{"schema":{"type":"object","additionalProperties":{"type":"object","additionalProperties":{"$ref":"#/components/schemas/Link"}}}}}}}}},"/actuator/health":{"get":{"tags":["Actuator"],"summary":"Actuator web endpoint 'health'","operationId":"health","responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"OK","content":{"application/vnd.spring-boot.actuator.v3+json":{"schema":{"type":"object"}},"application/vnd.spring-boot.actuator.v2+json":{"schema":{"type":"object"}},"application/json":{"schema":{"type":"object"}}}}}}}},"components":{"schemas":{"ProblemDetail":{"type":"object","properties":{"type":{"type":"string","format":"uri"},"title":{"type":"string"},"status":{"type":"integer","format":"int32"},"detail":{"type":"string"},"instance":{"type":"string","format":"uri"},"properties":{"type":"object","additionalProperties":{"type":"object"}}}},"SelectBankRequestDTO":{"type":"object","properties":{"bankId":{"type":"string","minLength":1},"bankName":{"type":"string","minLength":1}}},"CompleteOnboardingRequestDTO":{"type":"object","properties":{"bankUsername":{"type":"string"},"bankPassword":{"type":"string"}}},"AggregatedData":{"type":"object","properties":{"aggregatorIdForUser":{"type":"string","format":"uuid"},"name":{"type":"string"},"iban":{"type":"string"}}},"AssociatedBank":{"type":"object","properties":{"bankId":{"$ref":"#/components/schemas/BankId"},"aggregatedData":{"$ref":"#/components/schemas/AggregatedData"},"synchronizationStatus":{"type":"string","enum":["SYNCHRONIZED","NOT_SYNCHRONIZED"]},"aggregator":{"type":"string","enum":["PLAID","BRIDGE"]}}},"AuthenticationInformation":{"type":"object","properties":{"accessToken":{"type":"string"}}},"BankId":{"type":"object","properties":{"value":{"type":"string"}}},"BankLinkingSession":{"type":"object","properties":{"id":{"type":"string"},"url":{"type":"string"}}},"Email":{"type":"object","properties":{"value":{"type":"string"}}},"LoginData":{"type":"object","properties":{"email":{"$ref":"#/components/schemas/Email"},"password":{"$ref":"#/components/schemas/Password"}}},"Password":{"type":"object","properties":{"value":{"type":"string"}}},"PersonalData":{"type":"object","properties":{"firstName":{"type":"string"},"lastName":{"type":"string"}}},"ToCompleteOnboardingResponse":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/User"},"authenticationInformation":{"$ref":"#/components/schemas/AuthenticationInformation"},"sessionInformation":{"$ref":"#/components/schemas/BankLinkingSession"}}},"User":{"type":"object","properties":{"id":{"$ref":"#/components/schemas/UserId"},"login":{"$ref":"#/components/schemas/LoginData"},"personalData":{"$ref":"#/components/schemas/PersonalData"},"status":{"type":"string","enum":["PENDING_VERIFICATION","ACTIVE","ONBOARDING_COMPLETED","LOCKED","DEACTIVATED"]},"associatedBanks":{"type":"array","items":{"$ref":"#/components/schemas/AssociatedBank"}},"email":{"$ref":"#/components/schemas/Email"}}},"UserId":{"type":"object","properties":{"value":{"type":"string","format":"uuid"}}},"InitiateOnboardingRequestDTO":{"type":"object","properties":{"userEmail":{"type":"string","minLength":1},"bankId":{"type":"string","minLength":1}}},"LinkingBankAccountResponseDTO":{"type":"object","properties":{"linkingSession":{"$ref":"#/components/schemas/BankLinkingSession"}},"required":["linkingSession"]},"RegisterUserRequestDTO":{"type":"object","properties":{"email":{"type":"string","minLength":1},"password":{"type":"string","minLength":1}}},"RegisterUserResponseDTO":{"type":"object","properties":{"userId":{"type":"string","format":"uuid"},"accessToken":{"type":"string","minLength":1}},"required":["userId"]},"SignInRequestDTO":{"type":"object","properties":{"email":{"type":"string","minLength":1},"password":{"type":"string","minLength":1,"pattern":"^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#&()\\[\\]{}:;',?/*~$^+=<>-]).{8,20}$"}}},"LoginResponseDTO":{"type":"object","properties":{"accessToken":{"type":"string"}}},"ChatRequest":{"type":"object","properties":{"message":{"type":"string"},"variables":{"type":"object","additionalProperties":{"type":"object"}}}},"ChatResponse":{"type":"object","properties":{"message":{"type":"string"}}},"GetTransactionsResponse":{"type":"object","properties":{"transactions":{"type":"array","items":{"$ref":"#/components/schemas/TransactionDTO"}}}},"TransactionDTO":{"type":"object","properties":{"transactionId":{"type":"string"},"amount":{"type":"number"},"currency":{"type":"string"},"description":{"type":"string"},"transactionDate":{"type":"string","format":"date-time"},"shopName":{"type":"string"}}},"AvailableBank":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"logoUrl":{"type":"string"}}},"AvailableBanksResponseDTO":{"type":"object","properties":{"availableBanks":{"type":"array","items":{"$ref":"#/components/schemas/AvailableBank"}}}},"Amount":{"type":"object","properties":{"value":{"type":"number"},"currency":{"type":"object","properties":{"currencyCode":{"type":"string"},"numericCode":{"type":"integer","format":"int32"},"numericCodeAsString":{"type":"string"},"displayName":{"type":"string"},"symbol":{"type":"string"},"defaultFractionDigits":{"type":"integer","format":"int32"}}}}},"Expense":{"type":"object","properties":{"amount":{"$ref":"#/components/schemas/Amount"}}},"Expenses":{"type":"object","properties":{"expenses":{"type":"array","items":{"$ref":"#/components/schemas/Expense"}}}},"GetExpensesWidgetResponse":{"type":"object","properties":{"dailyExpenses":{"$ref":"#/components/schemas/Expenses"},"weeklyExpenses":{"$ref":"#/components/schemas/Expenses"},"monthlyExpenses":{"$ref":"#/components/schemas/Expenses"}}},"Link":{"type":"object","properties":{"href":{"type":"string"},"templated":{"type":"boolean"}}}}}}